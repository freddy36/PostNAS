Entwurf - krz Frank Jäger - Artikel Linux-Magazin - Projekt PostNAS

Stand 11.06.2010


Die Werke

Das analog geführte Liegenschaftskataster bestand über Jahrzehnte aus folgenden 'Werken':
 - Buchwerk:
   -- 'Flurbuch', Verzeichnis der Flurstücke und ihrer Eigenschaften
   -- 'Bestandblätter', die Angaben aus dem Grundbuch des Amtsgerichtes in Karteiform
 - Kartenwerk: Auf Karton und/oder Folie gezeichnete 'Liegenschaftskarte'
 - Zahlenwerk: 'Vermessungsrisse' (örtliche Skizzen), Berechnungen und Koordinaten von Vermessungspunkten

Die DV-Historie

Mit Beginn der Automatisierung in den 1970er Jahren wurden zunächst die alphanumerischen Informationen der Flurbücher und der Bestandsblätter digital gespeichert. Das erste Verfahren 'BEDV' basierte noch auf einer linearen Datenbank (indizierte Sätze). Das Nachfolgeverfahren 'ALB' (Automatisierts Liegenschafts Buchwerk) hatte eine hierarchische Datenbankstruktur entsprechend der damaligen Großrechner-Technik.

Mit der Verfügbarkeit grafischer Bildschirme und ausreichend leistungsfähiger Hardware Ende der 1980er Jahren (UNIX, DecVMS) wurde die Digitalisierung der Karte begonnen. Die Software zur 'ALK' (Automatisierte Liegenschafts-Karte) bestand aus dem Bearbeitungsteil 'ALK-GIAP' (Graphisch Interaktiver Arbeitsplatz) und dem zentralen Datenbankteil (ALK-DB) in dem die Vektorinformationen abgelegt wurden. Auch diese Datenbank war hierachisch strukturiert. Die Vermessungspukte aus dem 'Zahlenwerk' des Katasters wurden Teil der ALK, da sie die Basis der Karte bilden.

Geteilt

Aus dieser Chronologie erklärt sich, dass das Kataster bis vor kurzem in zwei getrennten Verfahren verwaltet wurde. 
Vom zentralen Objekt des Katasters - dem 'Flurstück' - fand man die alphanumerisch-beschreibenden Teile im ALB. Das sind Attribute wie Adresse, Größe und Nutzung sowie die Eigentümerangaben des Grundbuchs. Die 'Geometrie' (kartografische Darstellung) befand sich dagegen in der ALK: Grenzen, Grenzsteine, Gebäude usw.

Fortführungen (Änderungen) an einem Flurstück wie z.B. eine Teilung, mussten synchron in beiden Verfahren geschehen. Natürlich gab es dadurch auch Redundanzen: Die Hausnummer des ALK-Gebäudes traf man wieder als 'Adresse' des Flurstücks im ALB. Auch jeder Abschnitt eines Flurstücks mit unterschiedlicher Nutzung hatte eine geometrische Fläche und eine 'Buchfläche'.

Freies GIS

Ein Projekt zur Darstellung der 'ALK mit freier Software' begann 2004. Auf Initiative der CCGIS, einer Vorgängerfirma der WhereGroup, sollte die ALK in ihrer "amtlichen" Darstellung mit freien GIS-Tools wie dem UMN-Mapserver dargestellt werden. Einige bezweifelten, dass dies mit vertretbarem Aufwand möglich wäre. Das Liegenschaftskataster ist schon ein sehr besonderes "GIS" mit Jahrzehnte alten Regeln, die sich in Form von Ausnahmen und Besonderheiten auch in den Programmen manifestiert haben.

ZV-Aut

Mit "amtliche" Darstellung ist die Darstellung nach der "ZV-Aut" gemeint ("Vorschriften für das automatisierte Zeichnen der Liegenschaftskarte"). Nur mit strikter Einhaltung dieser amtlichen Darstellung dürfen Ausdrucke auch für offizielle Zwecke wie die Auskunft an Bürger verwendet werden. Der Bürger kann diese amtliche Karte dann für einen Bauantrag oder ähnliches verwenden.
Nur wenn die Einhaltung der ZV-Aut und zahlreiche weitere Bedingungen zu Aktualität, Sicherheit und Verfügbarkeit von der Bezirksregierung geprüft wurden, darf die Karte als amtlich verwendet werden. Dies war bis dahin teuren Spezialprogrammen vorbehalten, die nur von wenigen Softwareherstelllern angeboten wurden.

Diese Zeichenvorschrift schreibt noch das Kartenbild der früheren analogen Arbeitsweise vor, als die Karten mit schwarzer Tusche gezeichnet und durch Lichtpausen reproduziert wurden. Diese Darstellung ist reduziert auf reines Schwarz auf einem weißen (bzw. transparenten) Hintergrund. Auf Farben, Raster, Teiltransparenzen oder andere Mittel eines modernen GIS wird verzichtet. Eine Katasterverwaltung rennt eben nicht jedem Trend hinterher.

Kataster meets FOSSGIS

Als CCGIS erkannte, dass GIS-Kenntnissen allein nicht zum Ziel führen, wurden sie beim Kommunalen Rechenzentrum in Lemgo fündig. Dort gab es die notwendigen Kenntnisse der ALK-Strukturen und des EDBS-Formates. Aus Eigenbedarf war dort ein Programm entstanden, das die Schnittstelle "EDBS" in seine Strukturen zerlegt und als lesbaren Text für die Analyse darstellt. Dies "EDBS-Tool" stand als Freeware, wenn auch nicht als OpenSource zum Download. Der damalige CCGIS-Geschäftsführer Arnulf Christel meinte, nun bräuchte man ja nur noch diese Teile der EDBS in eine Datenbank schreiben. Dies stellte sich im Laufe des Projektes als Verharmlosung heraus. Nicht nur die "Redundanzfreiheit" der ALK war sinnvoll umzusetzen sondern auch Linientypen wie "Kreisbogen" oder "Spline" (ausgleichende Kurve über Stützpunkte und Vor-/Nachlaufpunkte) waren durch ausreichend fein interpolierte Polygone zu ersetzen, denn die Welt der OGC ist eckig und nicht rund.

ALK Konverter

Basis des Projektes 'ALK mit freier Software' wurde also der Konverter "edbs2wkt", der das Schnittstellenformat "EDBS" der ALK in eine Spatial-Datenbank überführt. Das ist nicht banal, denn die Struktur der ALK passt nicht zu den "Simple Features"-Normen der OGC (Open Geospatial Consortium). Nur OGC-konforme Srukturen sind mit den üblichen GIS-Werkzeugen performant darzustellen. Die Struktur der ALK basiert jedoch auf der Idee der 'redundanzfreien Geometrie'. Eine Linie ist in der ALK nur einmal gespeichert, auch wenn sie (horizontal) zwei Flächen rechts und links der Linie trennt und somit zu zwei Objekten eines Layers gehört. Auch wenn die Linie (vertikal) zu weiteren Objekten anderer fachlicher Ebenen (Layer) gehört, ist sie nur einmal gespeichert und somit redundanzfrei im Sinne der ALK. 
In einer Spatial-DB hat jedoch jedes Objekt 'seine' komplette Geometrie in 'seinem' Geometrie-Datenfeld gespeichert. Es ist irrelevant, ob dabei ein Teil vom Rand der Fläche auch ein Teil vom Rand einer anderen Fläche ist.

Der Konverter "edbs2wkt" wurde als OSS veröffentlicht, allerdings von einigen als "nicht wirklich frei" belächelt, da er auf Grund seiner Historie mit einer Microsoft-Entwicklungsumgebung entwickelt wurde.

Aufbauend auf dieser ALK-GIS-Struktur aus dem Konverter "edbs2wkt" wurden von der CCGIS und dem Katasteramtes der Obergergischen Kreises dann Mapfiles und Symbolbibliotheken für den Mapserver entwickelt. Das Ziel der "amtlichen Karte" wurde erreicht. Aber auch alternative, vereinfachte Darstellungen sind möglich. Die Lösung wird inzwischen in ganz Deutschland eingesetzt.

Bezieher

Eine Besonderheit der EDBS-Schnittstelle ist das Verfahren des 'Bezieher Sekundärnachweis' (BZSN). Die abgebende (primäre) Datenbank merkt sich die Änderungen am Bestand seit der letzten Abgabe. Es werden dann periodisch Differenzdaten für einen speziellen Bezieher (sekundäre Datenbank) ausgegeben, die vom Konverter eingepflegt werden. Nur damit ist bei großen Sekundärbeständen eine ausreichende Aktualität möglich. Eine immer wieder kehrende komplette Konvertierung des Gesamtbestandes wäre auf beiden Seiten zu aufwändig. 

ALKIS

Mit der Umstellung von "ALB" und "ALK" nach "ALKIS" wird die unschöne Trennung des Liegenschaftskatasters in zwei Verfahren beseitigt. Es wurde versprochen, bei ALKIS - anders als bei ALK und ALB - mehr auf gängige Standards zu setzen, z.B. auf "XML" beim Datenaustausch.

ALKIS wurde über viele Jahre geplant und entwickelt. Die Einführung wurde oft veschoben, aber nun wird es ernst: Einige Kreise und Bundesländer haben schon umgestellt, andere werden in Kürze folgen. Für die Komponenten des Projektes "ALK mit freier Software" wird also dringend ein Ersatz benötigt.
Sobald die Katasterämter kein EDBS mehr liefern sondern das neue ALKIS-Schnittstellenformat "NAS" (Normbasierte Austausch-Schnittstelle) sollte der Ersatz produktionsreif bereit stehen. Einige haben das bereits vor Jahren erkannt und die Entwicklung einer freien Alternative voran getrieben. Der Rest wartet ab und hofft darauf, dass beim ALKIS-Start eine Lösung bereit stehen wird. 

ALKIS-Konverter

Als erstes wird wieder ein Konverter benötigt. Die Verpackung in das Standard-Format 'XML' statt 'EDBS' sollte nicht darüber hinweg täuschen, dass ALKIS noch ähnliche Strukturen hat wie die ALK, diesmal noch angereichert mit den Attributen des Buchwerks 'ALB'. Die Dateigrößen von NAS haben sich gegenüber der EDBS vervielfacht. Während EDBS dicht gepackt pure Informationen enthielt, brauchen nun die spitzen Klammern der XML-Tags ihren Platz. Sie sind angefüllt mit Namen wie "ax_BauwerkOderAnlageFuerSportFreizeitUndErholung" oder "ax_SonstigesBauwerkOderSonstigeEinrichtung".

Der neue Konverter heißt "PostNAS". Der anfangs geplante Name "OpenNAS" war bereits belegt, da 'NAS' auch das Kürzel von 'Network Attached Storage' ist. Diesmal soll es ein 'wirklich freies' Projekt werden, das Betriebssystemunabhängig einsatzfähig ist. Da es jedoch schwierig war, die Anschubfinanzierung zusammen zu bekommen, musste zunächst eine Beteilungungsform in einer geschlossenen Gruppe von Pilotanwendern gewählt werden. 

Fast Fertig

Seit der Version 0.5 steht eine stabile PostNAS zur Verfügung, die nun sowohl das Kartenwerk als auch das Buchwerk vollständig umsetzt. Auch die Pflege eines Sekundärbestandes über einen "Bezieher" ist seit PostNAS 0.5 möglich. Das ist umso wichtiger, als die Verarbeitungszeiten gegenüber EDBS deutlich länger geworden sind. Der Bezieher heißt nun nicht mehr 'BZSN' sondern 'NBA' (Nutzerbezogene Bestandsdaten-Aktualisierung).
Innerhalb des Buchwerks gibt es zahlreiche rechtliche Beziehungen zwischen den Objekten aus dem Grundbuch:
 - Flurstück ist gebucht auf Buchungsstelle (Grundstück)
 - Buchungsstelle gehört zu Grndbuchblatt
 - Buchungsstelle hat Recht an anderer Buchungsstelle (Erbpacht, Eigentumswohnung)
usw.
In der Datenbank werden die Beziehungen nicht als direkte Relationen zwischen den Tabellen modelliert sondern für jede dieser Beziehungen wird die zentrale Tabelle für 'alkis_beziehungen' dazwischen geschaltet. Jede dieser Realationen enthält noch ein 'Verb' wie 'istBestandteilVon' oder 'istGebucht'.
Damit verdoppelt sich allerdings die Anzahl von JOINS in SQL-Views. Dies führt zu längeren Antwortzeiten auch bei der Auswertung. 

ALKIS amtlich

Die Ansprüche an die "Amtlichkeit" haben sich gegenüber ALK und ALB noch erhöht. Eine Vielzahl von "ALKIS-Produkten" wird in ihrer Form genau vorgeschrieben. Wieder einmal sieht es so aus, als wenn diese "amtlichen" ALKIS-Produkte mit freier Software nicht mit vertretbarem Aufwand realisiert werden können. Aber schaun wir mal ... 

ALKIS light

Selbst wenn das so sein sollte, gibt es doch für ein freies ALKIS-GIS ein breites Anwendungsgebiet. Es zeichnet sich ab, dass auch die amtlichen ALKIS-Produkte nicht direkt aus der primären Datenhaltung erzeugt werden können. Dort blockieren Langzeit-Transaktionen für erfasste, plausibilisierte und simulierte, aber noch nicht freigegebene Fortführungen eine performante Benutzung.
Daher wird schon innerhalb einer ALKIS-Datenhaltung über 'Bezieher'-Funktionen eine sekundäre Datenbank aufgebaut, die als Basis für die 'amtlichen' Auskünfte dient. Die notwendige Tagesaktualität steht im Widerspruch zu den Verarbeitungszeiten beim Erstladen, die sich eher in Wochen messen. Es zeichnet sich ein Problem im Produktionsbetrieb ab, falls der sekundären ALKIS-Datenbank mal etwas zustoßen sollte, und ein neuer Aufbau notwendig wird.    
Auch in der sekundären Datenbank sind die Antwortzeiten von 'amtlichen Auskünften' nicht so gut wie in einem optimierten GIS-Umfeld. Das Design der primären und sekundären DB ist identisch und eher auf Sicherheit der Datenhaltung ausgelegt als auf Geschwindigkeit.

Dritte Stufe   

Es gibt also selbst innerhalb einer Katasterverwaltung den Bedarf, für eine 'tertiäre' Datenhaltung in einem GIS-Format mit der schnelle Suche und Navigation, 'einfache' Auskünfte und eine ALKIS-Hintergrundkarte für andere Karten möglich sind. Das schnelle GIS kann als Vorschau für die Suche dienen. Erst im Ergebnis wird in das amtliche Auskunftsystem verlinkt, das dadurch entlastet wird.

Die Hauptnutzer von PostNAS werden aber wohl Städte, Gemeinden und Verbände sein, die unabhängig vom Kataster einen eigenen Bestand für die genannten Zwecke aufbauen möchten.

Die Karte

Die Kartendarstelung in ALKIS ist dezent bunter geworden, man erkennt aber deutlich die Abstammung aus der ALK.
Durch Abschalten der farbigen Flächen bekommt man die gewohnte Strichzeichnung der Grenzen, die sich gut mit anderen Karten kombinieren lässt. Diese Kombination der Datenlayer beantwortet fragen wie: Liegt der Kanal im städtischen oder im privaten Grundstück? Wem gehört der schiefe Baum?

Das Buch

Die Auskunft aus dem Buchwerk startet oft durch einen Klick in die Karte mit dem das Flurstück räumlich identifiziert wird. Der oft genannte Anspruch an eine Auskunft ist: "Ich möchte nur kurz wissen, wer DER Eigentümer DES Flurstücks ist".
Für viele Fälle kann das so einfach beantwortet werden, aber aufgrund komplizierter Rechtsverhältnisse kann die Antwort auch deutlich länger ausfallen.
Auch eine 'einfache' Auskunft muss dabei alle Rechtsbeziehungen des Grundbuchs korrekt darstellen. Das 'einfach' bezieht sich hier nur auf die Form. Es wird eine HTML-Ausgabe erzeugt, die in verschiedenen Browsern oder auf verschiedenen Druckern zu unterschiedlicher Darstellung führen kann. Die 'amtliche' Darstellung ist jedoch auf die Ausgabe von 'unveränderlichen' PDF-Dokumenten angewiesen.

Die Eigentümer

Die Beziehungen im Grundbuch könnten zum Beispiel so aussehen: Das abzufragende Flurstück ist eins von mehreren Flurstücken in einem Grundstück (Buchungsstelle). Mehrere Grundbuchblätter haben Rechte an diesem Grundstück wie zum Beispiel ein Erbaurecht oder einen Anteil an den Grundstück verbunden mit einer Eigentumswohnung. Auf jedem dieser Grundbüchern können wieder mehrere Personen als Eigentümer eingetragen sein. Ein nicht seltener Fall: Ein Ehepartner hat 1/2 Anteil an dem Grundbuch. Der andere Ehepartner ist verstorben und die Kinder halten gemeinsam die andere Hälfte in der Rechtsform einer Erbengemeinschaft.

Die Frage nach DEM Eigentümer kann also in einigen Fällen eine lange Liste mit Personen hervorbringen, die auch von 'einfachen' Auskünften vollständig beantwortet werden muss.   

Programme für derartige Auskünfte sind in der Entwicklung und müssen ebenfalls beim Produktionsstart von ALKIS als Ersatz für die bisher verwendeten ALK/ALB-Programme einsatzbereit sein.

